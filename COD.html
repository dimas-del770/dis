<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>HD BRUTAL - Dimzz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet" />
  <style>
    * {
      box-sizing: border-box;
      font-family: 'Orbitron', sans-serif;
    }
    html, body {
      margin: 0; padding: 0; height: 100%;
      background: linear-gradient(270deg, #0f172a, #1e293b, #0f172a);
      background-size: 600% 600%;
      animation: backgroundScroll 20s ease infinite;
      color: white; display: flex; justify-content: center; align-items: center;
    }
    @keyframes backgroundScroll {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .login-container, .app-container, .premium-container {
      position: absolute;
      padding: 30px;
      border-radius: 20px;
      max-width: 400px;
      width: 90%;
      text-align: center;
      animation: bounceIn 1s ease;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-blend-mode: overlay;
      box-shadow: 0 0 25px #ef4444aa;
      overflow: hidden;
      z-index: 1;
    }
    .login-container {
      background-image:
        linear-gradient(270deg, rgba(15,23,42,0.9), rgba(30,41,59,0.9)),
        url(' https://files.catbox.moe/y7b4b9.jpg ');
    }
    .app-container {
      background-image:
        linear-gradient(270deg, rgba(15,23,42,0.8), rgba(30,41,59,0.8)),
        url('https://files.catbox.moe/lj1gya.jpg ');
    }
    .premium-container {
      background-image:
        linear-gradient(270deg, rgba(20,30,50,0.9), rgba(30,50,80,0.9)),
        url('https://files.catbox.moe/lj1gya.jpg ');
      border: 2px solid gold;
      box-shadow: 0 0 25px gold;
    }
    @keyframes bounceIn {
      0% { transform: translateY(100px); opacity: 0; }
      60% { transform: translateY(-10px); opacity: 1; }
      100% { transform: translateY(0); }
    }
    h2 {
      margin-bottom: 20px;
      font-size: 24px;
      font-weight: bold;
      color: #f43f5e;
      text-shadow: 0 0 10px #f43f5e80;
    }
    input, button {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border-radius: 10px;
      border: none;
      font-size: 1rem;
      outline: none;
    }
    input[type="text"] {
      background: #1e293b;
      color: white;
      border: 1px solid #475569;
    }
    button {
      background: #ef4444;
      color: white;
      cursor: pointer;
      font-weight: bold;
      transition: 0.3s ease;
    }
    button:hover {
      animation: glowShake 0.8s infinite;
      background: #dc2626;
    }
    @keyframes glowShake {
      0%, 100% { box-shadow: 0 0 10px #f43f5e, 0 0 20px #f43f5e; transform: translateX(0); }
      25% { transform: translateX(2px); }
      50% { transform: translateX(-2px); }
      75% { transform: translateX(2px); }
    }
    canvas { display: none; }
    #preview, #preview2 {
      margin-top: 20px;
      max-width: 100%;
      border-radius: 12px;
      box-shadow: 0 0 20px #f43f5e66;
      opacity: 0;
      transform: translateY(30px);
      animation: previewFadeIn 1s ease forwards;
      animation-delay: 0.5s;
    }
    @keyframes previewFadeIn {
      to { opacity: 1; transform: translateY(0); }
    }
    .hidden { display: none !important; }
    .logout-btn {
      background: #facc15;
      color: black;
      margin-top: 10px;
    }
    audio { display: none; }
    .code-section {
      margin-top: 20px;
      padding: 15px;
      background: rgba(0,0,0,0.4);
      border-radius: 12px;
      border: 1px solid #f43f5e;
    }
    .code-section label {
      display: block;
      margin-bottom: 8px;
      color: #fbbf24;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <audio id="loginAudio" autoplay loop playsinline>
    <source src="https://files.catbox.moe/wiwb0x.mp4 " type="audio/mp4" />
  </audio>
  <audio id="mainAudio" loop playsinline class="hidden">
    <source src="https://files.catbox.moe/wiwb0x.mp4 " type="audio/mp4" />
  </audio>

  <!-- Halaman Login -->
  <div class="login-container" id="loginPage">
    <h2>Login HD BRUTAL</h2>
    <input type="text" id="username" placeholder="Username" />
    <button onclick="requestAccess()">‚û°Ô∏è Minta Akses</button>

    <!-- Input Kode Konfirmasi -->
    <div class="code-section">
      <label for="userCode">Masukkan Kode Konfirmasi:</label>
      <input type="text" id="userCode" placeholder="Contoh: ACC-DIMZZ" />
      <button onclick="verifyCode()">‚úÖ Verifikasi & Masuk</button>
    </div>

    <small style="color:#f43f5e; font-size:0.8rem; margin-top:10px; display:block;">
      üîê 1 User = 1 Kode dari Admin via WhatsApp
    </small>
  </div>

  <!-- Halaman Utama -->
  <div class="app-container hidden" id="appPage">
    <h2>HD BRUTAL - Dimzz</h2>
    <input type="file" accept="image/*" id="inputImage" />
    <select id="effectSelect">
      <option value="brighten">‚ú® Mencerahkan</option>
      <option value="efiko">üåà Efiko</option>
      <option value="brutal">üî• HD Brutal</option>
      <option value="hdpremium">‚≠ê HD Premium</option>
      <option value="capcut">üé¨ CapCut</option>
      <option value="smooth">üíÜ Halus</option>
      <option value="hdmenyala">üí° HD MENYALA</option>
    </select>
    <button onclick="enhanceImage(false)">Proses HD</button>
    <button onclick="downloadImage()">Unduh Gambar</button>
    <button class="logout-btn" onclick="logout()">Logout</button>
    <canvas id="canvas"></canvas>
    <img id="preview" src="" alt="Preview Gambar HD" />
  </div>

  <!-- Halaman Premium -->
  <div class="premium-container hidden" id="premiumPage">
    <h2>HD PREMIUM UNLOCKED</h2>
    <input type="file" accept="image/*" id="inputImage2" />
    <select id="effectSelect2">
      <option value="brighten">‚ú® Mencerahkan</option>
      <option value="efiko">üåà Efiko</option>
      <option value="brutal">üî• HD Brutal</option>
      <option value="hdpremium">‚≠ê HD Premium</option>
      <option value="capcut">üé¨ CapCut</option>
      <option value="smooth">üíÜ Halus</option>
      <option value="hdmenyala">üí° HD MENYALA</option>
    </select>
    <button onclick="enhanceImage(true)">Proses HD</button>
    <button onclick="downloadImage()">Unduh Gambar</button>
    <button class="logout-btn" onclick="logout()">Logout</button>
    <canvas id="canvas2"></canvas>
    <img id="preview2" src="" alt="Preview Gambar HD" />
  </div>

  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    const canvas2 = document.getElementById("canvas2");
    const ctx2 = canvas2.getContext("2d");

    let tempUser = null;

    function logout() {
      document.getElementById("appPage").classList.add("hidden");
      document.getElementById("premiumPage").classList.add("hidden");
      document.getElementById("loginPage").classList.remove("hidden");
      document.getElementById("premiumPage").classList.add("hidden");
      
      const loginAudio = document.getElementById("loginAudio");
      const mainAudio = document.getElementById("mainAudio");
      
      mainAudio.pause();
      mainAudio.classList.add("hidden");
      loginAudio.play().catch(() => {
        document.body.addEventListener("click", () => loginAudio.play(), { once: true });
      });
    }

    window.addEventListener("load", () => {
      const loginAudio = document.getElementById("loginAudio");
      loginAudio.muted = false;
      loginAudio.play().catch(() => {
        document.body.addEventListener("click", () => loginAudio.play(), { once: true });
      });
    });

    // Langkah 1: Kirim permintaan ke WhatsApp
    function requestAccess() {
      const u = document.getElementById("username").value.trim().toUpperCase();
      if (!u || (u !== "DIMZZ" && u !== "PREMIUM")) {
        alert("Username hanya: DIMZZ atau PREMIUM");
        return;
      }

      tempUser = u;

      const message = `Permintaan%20Login:%0AUser:%20${u}%0ABalas:%20yes%20untuk%20setuju%2C%20no%20untuk%20tolak`;
      const waUrl = `https://wa.me/6282394961470?text=${message}`;
      window.open(waUrl, "_blank");

      alert(`Permintaan login dikirim!\n\nTunggu konfirmasi dari admin.\nJika disetujui, Anda akan mendapat kode unik.`);
    }

    // Langkah 2: Verifikasi kode dan langsung masuk
    function verifyCode() {
      const code = document.getElementById("userCode").value.trim();
      const u = tempUser;

      if (!u) {
        alert("Harap klik 'Minta Akses' terlebih dahulu.");
        return;
      }

      // 1 KODE UNTUK 1 PENGGUNA (UNIK)
      if (u === "DIMZZ" && code === "ACC-DIMZZ") {
        successLogin("appPage");
      } else if (u === "PREMIUM" && code === "ACC-PREMIUM") {
        successLogin("premiumPage");
      } else {
        alert("‚ùå Kode salah atau tidak berlaku.\nPastikan Anda mendapat kode dari admin setelah balas 'yes'.");
      }
    }

    // Fungsi login sukses: langsung masuk ke menu
    function successLogin(pageId) {
      const mainAudio = document.getElementById("mainAudio");
      const loginAudio = document.getElementById("loginAudio");

      document.getElementById("loginPage").classList.add("hidden");
      document.getElementById(pageId).classList.remove("hidden");

      loginAudio.pause();
      mainAudio.classList.remove("hidden");
      mainAudio.play().catch(() => {
        document.body.addEventListener("click", () => mainAudio.play(), { once: true });
      });
    }

    // Fungsi Enhance Image
    function enhanceImage(isPremium) {
      const input = document.getElementById(isPremium ? "inputImage2" : "inputImage");
      const preview = document.getElementById(isPremium ? "preview2" : "preview");
      const canvasUsed = isPremium ? canvas2 : canvas;
      const ctxUsed = isPremium ? ctx2 : ctx;
      const effect = document.getElementById(isPremium ? "effectSelect2" : "effectSelect").value;

      if (!input.files[0]) return alert("Pilih gambar terlebih dahulu.");

      const premiumEffects = ["brutal", "hdpremium", "capcut", "smooth", "hdmenyala", "efiko"];
      if (!isPremium && premiumEffects.includes(effect)) {
        const confirmRedirect = confirm("Fitur ini berbayar. Hubungi WhatsApp untuk akses?");
        if (confirmRedirect) {
          window.location.href = " https://wa.me/6282394961470?text=Halo%20saya%20ingin%20akses%20fitur%20premium%20(" + effect + ")";
        }
        return;
      }

      const reader = new FileReader();
      const img = new Image();
      reader.onload = e => {
        img.onload = () => {
          canvasUsed.width = img.width;
          canvasUsed.height = img.height;
          ctxUsed.drawImage(img, 0, 0);
          let d = ctxUsed.getImageData(0, 0, canvasUsed.width, canvasUsed.height);
          let data = d.data;
          for (let i = 0; i < data.length; i += 4) {
            let r = data[i], g = data[i + 1], b = data[i + 2];
            if (effect === "brighten") {
              r *= 1.08; g *= 1.08; b *= 1.08; r += 10; g += 10; b += 10;
            } else if (effect === "smooth") {
              let avg = (r + g + b) / 3, f = 0.3;
              r = r * (1 - f) + avg * f; g = g * (1 - f) + avg * f; b = b * (1 - f) + avg * f;
              r = r * 1.02; g = g * 1.02; b = b * 1.02;
            } else if (effect === "brutal") {
              r = (r - 128) * 1.9 + 128; g = (g - 128) * 1.7 + 128; b = (b - 128) * 1.9 + 128;
              r *= 1.02; g *= 1.02; b *= 1.02;
            } else if (effect === "efiko") {
              r = (r - 128) * 1.7 + 128; g = (g - 128) * 1.7 + 128; b = (b - 128) * 1.7 + 128;
              r += 5; g += 5; b += 5;
            } else if (effect === "capcut") {
              let [h, s, l] = rgbToHsl(r, g, b);
              s *= 1.25; l *= 1.06;
              [r, g, b] = hslToRgb(h, s, l);
              r *= 1.02; g *= 1.02; b *= 1.02;
            } else if (effect === "hdpremium") {
              let [h, s, l] = rgbToHsl(r, g, b);
              s *= 1.15; l *= 1.05;
              [r, g, b] = hslToRgb(h, s, l);
              r += 4; g += 4; b += 4;
            } else if (effect === "hdmenyala") {
              let [h, s, l] = rgbToHsl(r, g, b);
              s *= 1.3; l *= 1.05;
              [r, g, b] = hslToRgb(h, s, l);
              r += 6; g += 6; b += 6;
            }
            data[i] = Math.min(255, Math.max(0, r));
            data[i + 1] = Math.min(255, Math.max(0, g));
            data[i + 2] = Math.min(255, Math.max(0, b));
          }
          ctxUsed.putImageData(d, 0, 0);
          preview.style.filter = "contrast(1.1) saturate(1.25)";
          preview.src = canvasUsed.toDataURL("image/png");
        };
        img.src = e.target.result;
      };
      reader.readAsDataURL(input.files[0]);
    }

    function downloadImage() {
      const canvasUsed = !document.getElementById("appPage").classList.contains("hidden") ? canvas : canvas2;
      const link = document.createElement("a");
      link.download = "HD-Gambar.png";
      link.href = canvasUsed.toDataURL("image/png");
      link.click();
    }

    function rgbToHsl(r, g, b) {
      r /= 255; g /= 255; b /= 255;
      const max = Math.max(r, g, b), min = Math.min(r, g, b);
      let h, s, l = (max + min) / 2;
      if (max == min) { h = s = 0; }
      else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch (max) {
          case r: h = (g - b) / d + (g < b ? 6 : 0); break;
          case g: h = (b - r) / d + 2; break;
          case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
      }
      return [h, s, l];
    }

    function hslToRgb(h, s, l) {
      let r, g, b;
      if (s == 0) { r = g = b = l; }
      else {
        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
        const p = 2 * l - q;
        const hue2rgb = (p, q, t) => {
          if (t < 0) t += 1;
          if (t > 1) t -= 1;
          if (t < 1/6) return p + (q - p) * 6 * t;
          if (t < 1/2) return q;
          if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
          return p;
        };
        r = hue2rgb(p, q, h + 1/3);
        g = hue2rgb(p, q, h);
        b = hue2rgb(p, q, h - 1/3);
      }
      return [r * 255, g * 255, b * 255];
    }
  </script>
</body>
</html>